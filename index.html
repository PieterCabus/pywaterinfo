

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>pywaterinfo &mdash; pywaterinfo 0.4.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home"> pywaterinfo
          

          
          </a>

          
            
            
              <div class="version">
                0.4.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
</ul>
<p class="caption"><span class="caption-text">User guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="cache.html">Caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="timeseriesgroupids.html">Group identifiers</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/reference.html">Module Reference</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="conduct.html">Code of conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">pywaterinfo</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#" class="icon icon-home"></a> &raquo;</li>
        
      <li>pywaterinfo</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/fluves/pywaterinfo/blob/master/docs/index.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pywaterinfo">
<h1>pywaterinfo<a class="headerlink" href="#pywaterinfo" title="Permalink to this headline">¶</a></h1>
<p>Python package to download time series data from <a class="reference external" href="https://www.waterinfo.be/">waterinfo.be</a>.</p>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>pywaterinfo facilitates access to <a class="reference external" href="https://www.waterinfo.be/">waterinfo.be</a>, a
website managed by the <a class="reference external" href="https://en.vmm.be/">Flanders Environment Agency (VMM)</a> and
<a class="reference external" href="https://www.waterbouwkundiglaboratorium.be">Flanders Hydraulics Research</a>. The website
provides access to real-time water and weather related environmental variables for
Flanders (Belgium), such as rainfall, air pressure, discharge, and water level.
The package provides functions to search for stations and variables, and download
time series.</p>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>To install pywaterinfo with <code class="code docutils literal notranslate"><span class="pre">pip</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">pywaterinfo</span>
</pre></div>
</div>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>To initialize data requests from VMM, setup the <a class="reference internal" href="api/reference.html#pywaterinfo.Waterinfo" title="pywaterinfo.Waterinfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">Waterinfo</span></code></a> class with <cite>vmm</cite> as input:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pywaterinfo</span> <span class="kn">import</span> <span class="n">Waterinfo</span>
<span class="n">vmm</span> <span class="o">=</span> <span class="n">Waterinfo</span><span class="p">(</span><span class="s2">&quot;vmm&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The time series provided by waterinfo are all defined by a unique identifier called <code class="code docutils literal notranslate"><span class="pre">ts_id</span></code>. Each combination of a given <strong>variable</strong> (e.g. air pressure)
measured at a given <strong>location</strong> (e.g. Overpelt) with a certain <strong>frequency</strong> (e.g. 15min) is defined by an <code class="code docutils literal notranslate"><span class="pre">ts_id</span></code> identifier. Using such an identifier,
one can download the data of a given period with the command <a class="reference internal" href="api/reference.html#pywaterinfo.Waterinfo.get_timeseries_values" title="pywaterinfo.Waterinfo.get_timeseries_values"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_timeseries_values()</span></code></a>. For example, the 15 min air pressure time series
at Overpelt has identifier <code class="code docutils literal notranslate"><span class="pre">ts_id</span> <span class="pre">=</span> <span class="pre">78124042</span></code>. To get last day of data for the time series with ID <code class="code docutils literal notranslate"><span class="pre">78124042</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">vmm</span><span class="o">.</span><span class="n">get_timeseries_values</span><span class="p">(</span><span class="mi">78124042</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="s2">&quot;P1D&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>pywaterinfo returns the data as a <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/index.html">Pandas DataFrame</a>, which provides functionlities
to plot and manipulate the time series.</p>
<p>Requesting data from from HIC is very similar:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pywaterinfo</span> <span class="kn">import</span> <span class="n">Waterinfo</span>
<span class="n">hic</span> <span class="o">=</span> <span class="n">Waterinfo</span><span class="p">(</span><span class="s2">&quot;hic&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Get last day of data for the time series with ID <code class="code docutils literal notranslate"><span class="pre">39496010</span></code>, corresponding to high-resolution (5 min) conductivity measurements in Dendermonde:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">hic</span><span class="o">.</span><span class="n">get_timeseries_values</span><span class="p">(</span><span class="n">ts_id</span><span class="o">=</span><span class="s2">&quot;39496010&quot;</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="s2">&quot;P1D&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Next to the request of time series data for a given time series identifier, other
requests are supported as well. These functions provide multiple ways to search for the <code class="code docutils literal notranslate"><span class="pre">ts_id</span></code> you need to download
certain data. See the <a class="reference external" href="https://fluves.github.io/pywaterinfo/">documentation website</a> for more info.</p>
</div>
<div class="section" id="note-on-restrictions-of-the-downloads">
<h2>Note on restrictions of the downloads<a class="headerlink" href="#note-on-restrictions-of-the-downloads" title="Permalink to this headline">¶</a></h2>
<p>The amount of data downloaded from <a class="reference external" href="https://www.waterinfo.be/">waterinfo.be</a> is limited via a credit system. You do not need to get a token right away to download data. For limited or irregular downloads, a token will not be required.</p>
<p>When you require more extended data requests, please request a download token from the <a class="reference external" href="https://www.waterinfo.be/">waterinfo.be</a> site administrators
via the e-mail address &lt;<a class="reference external" href="mailto:hydrometrie&#37;&#52;&#48;waterinfo&#46;be">hydrometrie<span>&#64;</span>waterinfo<span>&#46;</span>be</a>&gt; with a statement of which data and how frequently you would like to download data.
You will then receive a client-credit code that can be used to obtain a token that is valid for 24 hours, after which the token can be
refreshed with the same client-credit code. The handling of this token is done by the package itself, but it is important to use
the code when initializing the <a class="reference internal" href="api/reference.html#pywaterinfo.Waterinfo" title="pywaterinfo.Waterinfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">Waterinfo</span></code></a> instance. For example, using a VMM token:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pywaterinfo</span> <span class="kn">import</span> <span class="n">Waterinfo</span>
<span class="n">vmm_token</span> <span class="o">=</span> <span class="s2">&quot;YOUR TOKEN CODE&quot;</span>
<span class="n">vmm</span> <span class="o">=</span> <span class="n">Waterinfo</span><span class="p">(</span><span class="s2">&quot;vmm&quot;</span><span class="p">,</span>  <span class="n">token</span><span class="o">=</span><span class="n">vmm_token</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="start-to-contribute">
<h2>Start to contribute<a class="headerlink" href="#start-to-contribute" title="Permalink to this headline">¶</a></h2>
<p>It’s good practice to create a separate development environment for your package development. Use your preferred
system (or maybe integrated in your IDE) to setup a Python environment and see those docs to setup an environment
(conda, pyenv, virtualenv,,…). Once created, you can install all the developer dependencies using pip:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="o">.</span><span class="p">[</span><span class="n">develop</span><span class="p">]</span>
</pre></div>
</div>
<p>You can do a local development install to start using the package. Activate your environment and run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">develop</span>
</pre></div>
</div>
<p>Tests are defined with <a class="reference external" href="https://docs.pytest.org">pytest</a>. Write tests and run them using the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">test</span>
</pre></div>
</div>
<p>In order to run all the tests, you need a HIC token, defined as an environmental variable <code class="docutils literal notranslate"><span class="pre">HIC_TOKEN</span></code>. When you do
not have a HIC token, you can ignore the token tests for HIC webservice, be defining to not run the tests
marked with the <cite>nohictoken</cite> label:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">test</span> <span class="o">--</span><span class="n">addopts</span> <span class="s2">&quot;-m &#39;not nohictoken&#39;&quot;</span>
</pre></div>
</div>
<p>or with pytest directly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pytest</span> <span class="o">-</span><span class="n">m</span> <span class="s1">&#39;not nohictoken&#39;</span>
</pre></div>
</div>
<p>The Github actions CI does have the token stored as a <em>secret</em>, so you do not really need a token for local testing, as eventual failures
will be noticed by the CI.</p>
<p>Documentation lives in the <cite>docs</cite> directory and is setup using <a class="reference external" href="http://www.sphinx-doc.org/en/master/">Sphinx package</a>.
You can edit the documentation using any text editor and then generate the HTML output by with the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build_sphinx</span>
</pre></div>
</div>
<p>The resulting html files will be in the <cite>docs_buildhtml folder</cite>. Double click the <cite>index.html</cite> to see the website on your local computer.</p>
<p>To keep the code formatting uniform, <a class="reference external" href="https://black.readthedocs.io/en/stable/index.html">black</a>. is used to make the
code styling as consistent as possible. The required dependencies are part of the develop requirements in the <cite>setup.cfg</cite> file,
but make sure to install the pre-commit hook:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pre</span><span class="o">-</span><span class="n">commit</span> <span class="n">install</span>
<span class="n">pre</span><span class="o">-</span><span class="n">commit</span> <span class="n">autoupdate</span>
</pre></div>
</div>
<p>The Github actions CI job runs the unit tests, doctest, pre-commit checks and documentation building as well.</p>
</div>
<div class="section" id="acknowledgements">
<h2>Acknowledgements<a class="headerlink" href="#acknowledgements" title="Permalink to this headline">¶</a></h2>
<p>The package development and maintenance is supported by <a class="reference external" href="https://fluves.com/">Fluves</a>. Part of the initial development of this package has been supported by <a class="reference external" href="https://vito.be">VITO</a>.</p>
<p><a class="reference internal" href="_images/logo_fluves.png"><img alt="logo1" src="_images/logo_fluves.png" style="width: 20%;" /></a>  <a class="reference internal" href="_images/logo_vito.png"><img alt="logo2" src="_images/logo_vito.png" style="width: 20%;" /></a></p>
<p>This package is just a small wrapper around waterinfo.be to facilitate researchers and other stakeholders in
downloading the data from <a class="reference external" href="https://www.waterinfo.be/">waterinfo.be</a>. The availability of this data is made
possible by <em>de Vlaamse Milieumaatschappij, Waterbouwkundig Laboratorium, Maritieme Dienstverlening &amp; Kust, Waterwegen
en Zeekanaal NV en De Scheepvaart NV</em>.</p>
</div>
<div class="section" id="other-clients">
<h2>Other clients<a class="headerlink" href="#other-clients" title="Permalink to this headline">¶</a></h2>
<p>Besides this Python client to gather data from <a class="reference external" href="https://www.waterinfo.be/">waterinfo.be</a>, there is also an R client available, the <a class="reference external" href="https://docs.ropensci.org/wateRinfo//">wateRinfo</a> package which is part of the <a class="reference external" href="https://ropensci.org/">ropensci</a> package suite and contains similar functionalities.</p>
<p>The <a class="reference external" href="https://www.waterbouwkundiglaboratorium.be/en/">Flanders Hydraulics Research center</a> also distributes clients for R, Python and Matlab upon request to download the data they share on <a class="reference external" href="https://www.waterinfo.be/">waterinfo.be</a>. For more information, contact them directly via <a class="reference external" href="mailto:hic&#37;&#52;&#48;vlaanderen&#46;be">hic<span>&#64;</span>vlaanderen<span>&#46;</span>be</a>.</p>
</div>
<div class="section" id="note">
<h2>Note<a class="headerlink" href="#note" title="Permalink to this headline">¶</a></h2>
<p>This project has been set up using PyScaffold 3.2.3. For details and usage
information on PyScaffold see <a class="reference external" href="https://pyscaffold.org/">https://pyscaffold.org/</a>.</p>
</div>
<div class="section" id="contents">
<h2>Contents<a class="headerlink" href="#contents" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
</ul>
</div>
<div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">User guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="cache.html">Caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="timeseriesgroupids.html">Group identifiers</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/reference.html">Module Reference</a></li>
</ul>
</div>
<div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">Developer guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="conduct.html">Code of conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>
</div>
</div>
<div class="section" id="indices-and-tables">
<h2>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="installation.html" class="btn btn-neutral float-right" title="Installation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, Stijn Van Hoey.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>